import{w as y}from"./CFkazVvC.js";import{p as h}from"./nFQqG5Lc.js";import{l as u}from"./BnnlzB-d.js";import{g as c}from"./BVPuvUpV.js";const C="https://payflow-backend.fly.dev";async function m(e,s={}){const{method:t="GET",headers:o={},body:l,queryParams:i,skipJsonParse:p=!1}=s;let d=`${C}${e}`;if(i){const n=new URLSearchParams;for(const f in i)n.append(f,String(i[f]));d+=`?${n.toString()}`}const a=await fetch(d,{method:t,headers:{"Content-Type":"application/json",...o},...l&&{body:JSON.stringify(l)}});if(!a.ok){const n=p?a.statusText:(await a.json()).message;throw new Error(n||`Request failed with status ${a.status}`)}return a}const g=y(null);function r(e){return e==="ja"?"代理店コードが不正です。正しいコードを入力してください。":"Agency code is irregular. Please enter a valid code."}function j(){const e=c(u)??"ja",t=c(h).url.searchParams.get("agencyCode"),o=sessionStorage.getItem("agencyCode");if(t){if(t.trim()===""){alert(r(e));return}m(`/api/v1/shop/agency?code=${t}`,{method:"GET"}).then(()=>{sessionStorage.setItem("agencyCode",t),g.set(t)}).catch(()=>{alert(r(e))})}else o&&g.set(o)}function k(e){const s=c(u)??"ja";if(e.trim()===""){alert(r(s));return}m(`/api/v1/shop/agency?code=${e}`,{method:"GET"}).then(()=>{sessionStorage.setItem("agencyCode",e),g.set(e)}).catch(()=>{alert(r(s))})}export{g as a,j as i,k as s};
